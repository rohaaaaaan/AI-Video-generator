<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Creation & Scheduling Platform</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            background: white;
            color: #4facfe;
            border-bottom: 3px solid #4facfe;
        }

        .nav-tab:hover {
            background: #e9ecef;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .step {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #4facfe;
        }

        .step h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .upload-area {
            border: 2px dashed #4facfe;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: #f0f8ff;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px 0;
        }

        .upload-area:hover {
            background: #e6f3ff;
            border-color: #2980b9;
        }

        .upload-area.dragover {
            background: #d4e6f7;
            border-color: #2980b9;
        }

        input[type="file"] {
            display: none;
        }

        input[type="text"], input[type="password"], input[type="number"], 
        input[type="datetime-local"], select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        button.secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }

        button.danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        button.success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .form-group {
            margin: 15px 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .content-output {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .media-preview {
            text-align: center;
            margin: 20px 0;
        }

        .media-preview video, .media-preview audio {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .status {
            padding: 12px 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 500;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #b8daff;
        }

        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .api-config {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .output-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .output-card {
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .output-card:hover,
        .output-card.selected {
            border-color: #4facfe;
            background: #f0f8ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.2);
        }

        .output-card h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .output-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .schedule-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .schedule-card h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .schedule-status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .schedule-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .schedule-status.processing {
            background: #d1ecf1;
            color: #0c5460;
        }

        .schedule-status.completed {
            background: #d4edda;
            color: #155724;
        }

        .schedule-status.failed {
            background: #f8d7da;
            color: #721c24;
        }

        .platform-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .platform-option {
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .platform-option:hover,
        .platform-option.selected {
            border-color: #4facfe;
            background: #f0f8ff;
        }

        .quality-selector {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .quality-option {
            flex: 1;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .quality-option:hover,
        .quality-option.selected {
            border-color: #4facfe;
            background: #f0f8ff;
        }

        .advanced-settings {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4facfe;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .record-btn {
            background: #e74c3c;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .record-btn.recording {
            background: #27ae60;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            .output-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé¨ AI Content Creation & Scheduling Platform</h1>
            <p>Transform audio & text into podcasts, videos, and movies with AI scheduling</p>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="create">üìù Create Content</button>
            <button class="nav-tab" data-tab="generate">ü§ñ AI Generation</button>
            <button class="nav-tab" data-tab="schedule">üìÖ Schedule & Publish</button>
            <button class="nav-tab" data-tab="settings">‚öôÔ∏è Settings</button>
        </div>

        <!-- Create Content Tab -->
        <div class="tab-content active" id="create">
            <div class="step">
                <h3>üéµ Step 1: Input Source</h3>
                
                <div class="form-row">
                    <div>
                        <h4>Audio File Upload</h4>
                        <div class="upload-area" id="audioUploadArea">
                            <div>
                                <p>üìÅ Upload Audio File</p>
                                <p>Supported: MP3, WAV, M4A, AAC</p>
                            </div>
                            <input type="file" id="audioFile" accept="audio/*" />
                        </div>
                        
                        <div style="text-align: center; margin: 20px 0;">
                            <p>Or record directly:</p>
                            <button class="record-btn" id="recordBtn">üé§</button>
                            <p id="recordingStatus"></p>
                        </div>
                    </div>
                    
                    <div>
                        <h4>Text/Markup File Upload</h4>
                        <div class="upload-area" id="textUploadArea">
                            <div>
                                <p>üìÑ Upload Text File</p>
                                <p>Supported: TXT, MD, DOCX</p>
                            </div>
                            <input type="file" id="textFile" accept=".txt,.md,.docx" />
                        </div>
                        
                        <div class="form-group">
                            <label for="directText">Or type/paste text directly:</label>
                            <textarea id="directText" rows="6" placeholder="Enter your content here..."></textarea>
                        </div>
                    </div>
                </div>
                
                <div class="media-preview" id="mediaPreview" style="display: none;">
                    <audio id="audioPreview" controls style="width: 100%;"></audio>
                </div>
            </div>

            <div class="step">
                <h3>üìù Step 2: Content Processing</h3>
                
                <button id="transcribeBtn" disabled>üéØ Process Content</button>
                <button id="testBasicBtn" class="secondary">üß™ Test Without API Keys</button>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                
                <div id="transcriptResult" class="content-output" style="display: none;">
                    <h4>üìú Processed Content:</h4>
                    <div id="transcriptText"></div>
                </div>
                
                <div id="keyPointsResult" class="content-output" style="display: none;">
                    <h4>üîë Key Points Extracted:</h4>
                    <ul id="keyPointsList"></ul>
                </div>
            </div>
        </div>

        <!-- AI Generation Tab -->
        <div class="tab-content" id="generate">
            <div class="step">
                <h3>üéØ Step 3: Choose Output Format</h3>
                
                <div class="output-options">
                    <div class="output-card" data-output="podcast">
                        <div class="icon">üéôÔ∏è</div>
                        <h4>AI Podcast</h4>
                        <p>Multi-voice podcast with natural conversation</p>
                    </div>
                    
                    <div class="output-card" data-output="movie">
                        <div class="icon">üé¨</div>
                        <h4>AI Movie</h4>
                        <p>Cinematic video with scenes and transitions</p>
                    </div>
                    
                    <div class="output-card" data-output="video">
                        <div class="icon">üìπ</div>
                        <h4>AI Video</h4>
                        <p>Educational/promotional video content</p>
                    </div>
                    
                    <div class="output-card" data-output="infographic">
                        <div class="icon">üìä</div>
                        <h4>Infographic Video</h4>
                        <p>Data visualization with voiceover</p>
                    </div>
                </div>
            </div>

            <div class="step">
                <h3>‚öôÔ∏è Step 4: Quality & Length Settings</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="videoLength">Video Length:</label>
                        <select id="videoLength">
                            <option value="30">30 seconds (Short)</option>
                            <option value="60">1 minute (Quick)</option>
                            <option value="120">2 minutes (Standard)</option>
                            <option value="300" selected>5 minutes (Detailed)</option>
                            <option value="600">10 minutes (Long)</option>
                            <option value="custom">Custom Length</option>
                        </select>
                        
                        <input type="number" id="customLength" placeholder="Enter seconds" style="display: none;" />
                    </div>
                    
                    <div class="form-group">
                        <label>Quality Settings:</label>
                        <div class="quality-selector">
                            <div class="quality-option selected" data-quality="hd">
                                <strong>HD</strong><br>
                                <small>1080p</small>
                            </div>
                            <div class="quality-option" data-quality="4k">
                                <strong>4K</strong><br>
                                <small>Ultra HD</small>
                            </div>
                            <div class="quality-option" data-quality="sd">
                                <strong>SD</strong><br>
                                <small>720p</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="advanced-settings">
                    <h4>üé® Advanced Options</h4>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label for="voiceStyle">Voice Style:</label>
                            <select id="voiceStyle">
                                <option value="natural">Natural</option>
                                <option value="professional">Professional</option>
                                <option value="casual">Casual</option>
                                <option value="energetic">Energetic</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="musicStyle">Background Music:</label>
                            <select id="musicStyle">
                                <option value="none">None</option>
                                <option value="ambient">Ambient</option>
                                <option value="upbeat">Upbeat</option>
                                <option value="corporate">Corporate</option>
                                <option value="cinematic">Cinematic</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="visualStyle">Visual Style:</label>
                            <select id="visualStyle">
                                <option value="modern">Modern</option>
                                <option value="minimalist">Minimalist</option>
                                <option value="colorful">Colorful</option>
                                <option value="professional">Professional</option>
                                <option value="creative">Creative</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="pacing">Content Pacing:</label>
                            <select id="pacing">
                                <option value="slow">Slow & Detailed</option>
                                <option value="medium" selected>Medium</option>
                                <option value="fast">Fast & Dynamic</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <button id="generateContentBtn" disabled>üöÄ Generate AI Content</button>
            </div>

            <div class="step" id="generationResults" style="display: none;">
                <h3>üì± Generation Results</h3>
                
                <div class="media-preview" id="generatedMediaPreview">
                    <!-- Generated content will appear here -->
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button id="downloadContentBtn" class="success">üì• Download Content</button>
                    <button id="editContentBtn" class="secondary">‚úèÔ∏è Edit Content</button>
                    <button id="scheduleContentBtn">üìÖ Schedule for Publishing</button>
                </div>
            </div>
        </div>

        <!-- Schedule & Publish Tab -->
        <div class="tab-content" id="schedule">
            <div class="step">
                <h3>üìÖ Schedule Content Publishing</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="scheduleDate">Publish Date & Time:</label>
                        <input type="datetime-local" id="scheduleDate" />
                    </div>
                    
                    <div class="form-group">
                        <label for="contentTitle">Content Title:</label>
                        <input type="text" id="contentTitle" placeholder="Enter content title..." />
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="contentDescription">Description:</label>
                    <textarea id="contentDescription" rows="4" placeholder="Enter content description..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Select Platforms:</label>
                    <div class="platform-selector">
                        <div class="platform-option" data-platform="youtube">
                            üì∫<br><small>YouTube</small>
                        </div>
                        <div class="platform-option" data-platform="instagram">
                            üì∏<br><small>Instagram</small>
                        </div>
                        <div class="platform-option" data-platform="tiktok">
                            üéµ<br><small>TikTok</small>
                        </div>
                        <div class="platform-option" data-platform="twitter">
                            üê¶<br><small>Twitter</small>
                        </div>
                        <div class="platform-option" data-platform="linkedin">
                            üíº<br><small>LinkedIn</small>
                        </div>
                        <div class="platform-option" data-platform="facebook">
                            üë•<br><small>Facebook</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tags">Tags (comma-separated):</label>
                    <input type="text" id="tags" placeholder="ai, technology, tutorial..." />
                </div>
                
                <button id="schedulePostBtn">üìÖ Schedule Post</button>
            </div>

            <div class="step">
                <h3>üìã Scheduled Posts</h3>
                
                <div id="scheduledPosts">
                    <!-- Scheduled posts will appear here -->
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button id="refreshScheduleBtn" class="secondary">üîÑ Refresh</button>
                    <button id="clearScheduleBtn" class="danger">üóëÔ∏è Clear All</button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="settings">
            <div class="step">
                <h3>üîß API Configuration</h3>
                
                <div class="status warning">
                    <strong>‚ö†Ô∏è Important Notes:</strong>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>API calls from browsers may have CORS restrictions</li>
                        <li>For production use, consider using a backend server</li>
                        <li>Never expose API keys in production applications</li>
                        <li>Test your API keys using the "Test Connections" button</li>
                    </ul>
                </div>
                
                <div class="api-config">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="openaiKey">OpenAI API Key:</label>
                            <input type="password" id="openaiKey" placeholder="sk-..." />
                            <small>For transcription, content analysis, and voice generation</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="elevenLabsKey">ElevenLabs API Key:</label>
                            <input type="password" id="elevenLabsKey" placeholder="..." />
                            <small>For AI voice generation and podcasts</small>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="stabilityKey">Stability AI Key:</label>
                            <input type="password" id="stabilityKey" placeholder="..." />
                            <small>For image and video generation</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="runwayKey">Runway ML Key:</label>
                            <input type="password" id="runwayKey" placeholder="..." />
                            <small>For advanced video generation</small>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="debugMode" style="width: auto; margin-right: 10px;" />
                            Enable Debug Mode (shows detailed error messages)
                        </label>
                    </div>
                    
                    <button id="saveSettingsBtn" class="success">üíæ Save Settings</button>
                    <button id="testConnectionBtn" class="secondary">üîå Test Connections</button>
                </div>
            </div>

            <div class="step">
                <h3>üõ†Ô∏è Troubleshooting</h3>
                
                <div class="content-output">
                    <h4>Common Issues & Solutions:</h4>
                    <div style="margin: 15px 0;">
                        <strong>üö´ "Processing failed" errors:</strong>
                        <ul style="margin: 5px 0 15px 20px;">
                            <li>Check your API keys are correctly formatted</li>
                            <li>Ensure your OpenAI key starts with "sk-"</li>
                            <li>Try enabling Debug Mode for detailed error info</li>
                            <li>Test your API connections using the "Test Connections" button</li>
                        </ul>
                        
                        <strong>üåê CORS (Cross-Origin) errors:</strong>
                        <ul style="margin: 5px 0 15px 20px;">
                            <li>This happens when browsers block API calls</li>
                            <li><strong>Quick Fix:</strong> Use Chrome with --disable-web-security flag</li>
                            <li><strong>CORS Proxy:</strong> Try adding "https://cors-anywhere.herokuapp.com/" before API URLs</li>
                            <li><strong>Local Server:</strong> Run: python -m http.server 8000 (then open localhost:8000)</li>
                            <li><strong>Browser Extension:</strong> Install "CORS Unblock" extension</li>
                        </ul>
                        
                        <strong>üéµ Audio processing issues:</strong>
                        <ul style="margin: 5px 0 15px 20px;">
                            <li>Ensure audio file is under 25MB</li>
                            <li>Use supported formats: MP3, WAV, M4A, AAC</li>
                            <li>Check that audio contains clear speech</li>
                            <li>Try a shorter audio clip first</li>
                        </ul>
                        
                        <strong>üîë API key issues:</strong>
                        <ul style="margin: 5px 0 15px 20px;">
                            <li>OpenAI key should start with "sk-"</li>
                            <li>Ensure you have sufficient API credits</li>
                            <li>Check that your key has the required permissions</li>
                            <li>Verify your account is in good standing</li>
                        </ul>
                        
                        <strong>üöÄ Quick Setup for Local Development:</strong>
                        <ul style="margin: 5px 0 15px 20px;">
                            <li><strong>Method 1 (Python):</strong> Open terminal ‚Üí Run "python -m http.server 8000" ‚Üí Open localhost:8000</li>
                            <li><strong>Method 2 (Node.js):</strong> Run "npx serve ." ‚Üí Open provided URL</li>
                            <li><strong>Method 3 (PHP):</strong> Run "php -S localhost:8000" ‚Üí Open localhost:8000</li>
                            <li><strong>Method 4 (Live Server):</strong> Use VS Code Live Server extension</li>
                        </ul>
                    </div>
                    
                    <div style="margin: 15px 0; padding: 15px; background: #e8f4fd; border-radius: 8px;">
                        <strong>üí° Pro Tip:</strong> Click "Test Without API Keys" button first to verify the app works, then add API keys gradually for enhanced features.
                    </div>
                </div>
                
                <button onclick="app.clearAllData()" class="danger">üóëÔ∏è Clear All Data & Reset</button>
                <button onclick="app.downloadLogs()" class="secondary">üìã Download Debug Logs</button>
            </div>

            <div class="step">
                <h3>üéõÔ∏è Default Preferences</h3>
                
                <div class="settings-grid">
                    <div class="form-group">
                        <label for="defaultQuality">Default Quality:</label>
                        <select id="defaultQuality">
                            <option value="hd" selected>HD (1080p)</option>
                            <option value="4k">4K Ultra HD</option>
                            <option value="sd">SD (720p)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="defaultLength">Default Length:</label>
                        <select id="defaultLength">
                            <option value="60">1 minute</option>
                            <option value="120">2 minutes</option>
                            <option value="300" selected>5 minutes</option>
                            <option value="600">10 minutes</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="autoSchedule">Auto-schedule:</label>
                        <select id="autoSchedule">
                            <option value="off">Disabled</option>
                            <option value="1hour">1 hour later</option>
                            <option value="1day">Next day</option>
                            <option value="1week">Next week</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="notificationEmail">Notification Email:</label>
                        <input type="email" id="notificationEmail" placeholder="your@email.com" />
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessages"></div>
    </div>

    <script>
        class AIContentPlatform {
            constructor() {
                this.audioFile = null;
                this.textContent = '';
                this.transcript = '';
                this.keyPoints = [];
                this.selectedOutput = 'video';
                this.selectedQuality = 'hd';
                this.selectedPlatforms = [];
                this.mediaRecorder = null;
                this.audioChunks = [];
                this.scheduledPosts = [];
                
                this.initializeEventListeners();
                this.loadSettings();
                this.loadScheduledPosts();
            }

            initializeEventListeners() {
                // Tab navigation
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => this.switchTab(tab.dataset.tab));
                });

                // File uploads
                this.setupFileUpload('audioUploadArea', 'audioFile', this.handleAudioFile.bind(this));
                this.setupFileUpload('textUploadArea', 'textFile', this.handleTextFile.bind(this));

                // Recording
                document.getElementById('recordBtn').addEventListener('click', () => this.toggleRecording());

                // Direct text input
                document.getElementById('directText').addEventListener('input', (e) => {
                    this.textContent = e.target.value;
                    this.updateTranscribeButton();
                });

                // Processing
                document.getElementById('transcribeBtn').addEventListener('click', () => this.processContent());
                document.getElementById('testBasicBtn').addEventListener('click', () => this.testBasicFunctionality());

                // Output selection
                document.querySelectorAll('.output-card').forEach(card => {
                    card.addEventListener('click', () => this.selectOutput(card.dataset.output));
                });

                // Quality selection
                document.querySelectorAll('.quality-option').forEach(option => {
                    option.addEventListener('click', () => this.selectQuality(option.dataset.quality));
                });

                // Platform selection
                document.querySelectorAll('.platform-option').forEach(option => {
                    option.addEventListener('click', () => this.togglePlatform(option.dataset.platform));
                });

                // Video length
                document.getElementById('videoLength').addEventListener('change', (e) => {
                    const customInput = document.getElementById('customLength');
                    customInput.style.display = e.target.value === 'custom' ? 'block' : 'none';
                });

                // Buttons
                document.getElementById('generateContentBtn').addEventListener('click', () => this.generateContent());
                document.getElementById('schedulePostBtn').addEventListener('click', () => this.schedulePost());
                document.getElementById('downloadContentBtn').addEventListener('click', () => this.downloadContent());
                document.getElementById('saveSettingsBtn').addEventListener('click', () => this.saveSettings());
                document.getElementById('testConnectionBtn').addEventListener('click', () => this.testConnections());
                document.getElementById('refreshScheduleBtn').addEventListener('click', () => this.refreshSchedule());
                document.getElementById('clearScheduleBtn').addEventListener('click', () => this.clearSchedule());
            }

            setupFileUpload(areaId, inputId, handler) {
                const uploadArea = document.getElementById(areaId);
                const fileInput = document.getElementById(inputId);
                
                uploadArea.addEventListener('click', () => fileInput.click());
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) handler(files[0]);
                });
                
                fileInput.addEventListener('change', (e) => {
                    if (e.target.files.length > 0) handler(e.target.files[0]);
                });
            }

            switchTab(tabName) {
                // Update nav tabs
                document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
                
                // Update content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(tabName).classList.add('active');
            }

            handleAudioFile(file) {
                this.audioFile = file;
                const audioPreview = document.getElementById('audioPreview');
                const url = URL.createObjectURL(file);
                audioPreview.src = url;
                document.getElementById('mediaPreview').style.display = 'block';
                
                this.updateTranscribeButton();
                this.showStatus(`Audio file loaded: ${file.name}`, 'success');
            }

            async handleTextFile(file) {
                try {
                    const text = await this.readTextFile(file);
                    this.textContent = text;
                    document.getElementById('directText').value = text;
                    
                    this.updateTranscribeButton();
                    this.showStatus(`Text file loaded: ${file.name}`, 'success');
                } catch (error) {
                    this.showStatus(`Error reading file: ${error.message}`, 'error');
                }
            }

            async readTextFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.onerror = () => reject(new Error('Failed to read file'));
                    reader.readAsText(file);
                });
            }

            updateTranscribeButton() {
                const hasInput = this.audioFile || this.textContent.trim().length > 0;
                document.getElementById('transcribeBtn').disabled = !hasInput;
            }

            async toggleRecording() {
                const recordBtn = document.getElementById('recordBtn');
                const statusEl = document.getElementById('recordingStatus');

                if (!this.mediaRecorder || this.mediaRecorder.state === 'inactive') {
                    try {
                        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                        this.mediaRecorder = new MediaRecorder(stream);
                        this.audioChunks = [];

                        this.mediaRecorder.ondataavailable = (event) => {
                            this.audioChunks.push(event.data);
                        };

                        this.mediaRecorder.onstop = () => {
                            const audioBlob = new Blob(this.audioChunks, { type: 'audio/wav' });
                            const audioFile = new File([audioBlob], 'recording.wav', { type: 'audio/wav' });
                            this.handleAudioFile(audioFile);
                            
                            recordBtn.classList.remove('recording');
                            recordBtn.innerHTML = 'üé§';
                            statusEl.textContent = '';
                        };

                        this.mediaRecorder.start();
                        recordBtn.classList.add('recording');
                        recordBtn.innerHTML = '‚èπÔ∏è';
                        statusEl.textContent = 'Recording... Click to stop';
                        
                    } catch (error) {
                        this.showStatus('Error accessing microphone: ' + error.message, 'error');
                    }
                } else {
                    this.mediaRecorder.stop();
                    this.mediaRecorder.stream.getTracks().forEach(track => track.stop());
                }
            }

            async processContent() {
                this.showStatus('Processing content...', 'info');
                this.updateProgress(25);

                try {
                    let transcript = '';
                    
                    if (this.audioFile) {
                        this.showStatus('Transcribing audio file...', 'info');
                        transcript = await this.transcribeAudio();
                    } else if (this.textContent) {
                        this.showStatus('Processing text content...', 'info');
                        transcript = this.textContent;
                    } else {
                        throw new Error('No content provided. Please upload an audio file or enter text.');
                    }
                    
                    if (!transcript || transcript.trim().length === 0) {
                        throw new Error('No content extracted. Please check your input.');
                    }
                    
                    this.transcript = transcript;
                    document.getElementById('transcriptText').textContent = transcript;
                    document.getElementById('transcriptResult').style.display = 'block';
                    
                    this.updateProgress(50);
                    this.showStatus('Extracting key points...', 'info');
                    
                    // Extract key points
                    const keyPoints = await this.extractKeyPoints(transcript);
                    this.keyPoints = keyPoints;
                    this.displayKeyPoints(keyPoints);
                    
                    this.updateProgress(100);
                    document.getElementById('generateContentBtn').disabled = false;
                    this.showStatus('Content processed successfully!', 'success');
                    
                } catch (error) {
                    this.updateProgress(0);
                    this.handleError(error, 'content processing');
                    
                    // Provide specific troubleshooting tips
                    if (error.message.includes('API key')) {
                        this.showStatus('üí° Tip: Check your API key format and ensure it has proper permissions', 'info');
                    } else if (error.message.includes('CORS') || error.message.includes('blocked')) {
                        this.showStatus('üí° Tip: CORS error detected. Try using a CORS proxy or run from a local server', 'info');
                    } else if (error.message.includes('network') || error.message.includes('fetch')) {
                        this.showStatus('üí° Tip: Network error. Check your internet connection and try again', 'info');
                    } else if (error.message.includes('file')) {
                        this.showStatus('üí° Tip: File processing error. Try a different audio format (MP3, WAV) or smaller file size', 'info');
                    }
                }
            }

            async transcribeAudio() {
                const openaiKey = document.getElementById('openaiKey').value.trim();
                
                if (!openaiKey) {
                    this.showStatus('No OpenAI API key provided. Using demo transcription...', 'warning');
                    return await this.simulateTranscription();
                }

                if (!openaiKey.startsWith('sk-')) {
                    throw new Error('Invalid OpenAI API key format. Key should start with "sk-"');
                }

                try {
                    this.showStatus('Transcribing with OpenAI Whisper...', 'info');
                    return await this.transcribeWithOpenAI(openaiKey);
                } catch (error) {
                    this.showStatus('OpenAI transcription failed, using fallback...', 'warning');
                    console.error('OpenAI transcription error:', error);
                    return await this.simulateTranscription();
                }
            }

            async transcribeWithOpenAI(apiKey) {
                if (!this.audioFile) {
                    throw new Error('No audio file available for transcription');
                }

                // Check file size (OpenAI limit is 25MB)
                if (this.audioFile.size > 25 * 1024 * 1024) {
                    throw new Error('Audio file too large. Maximum size is 25MB.');
                }

                const formData = new FormData();
                formData.append('file', this.audioFile);
                formData.append('model', 'whisper-1');
                formData.append('language', 'en'); // You can make this configurable
                
                try {
                    const response = await fetch('https://api.openai.com/v1/audio/transcriptions', {
                        method: 'POST',
                        headers: { 
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: formData
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`OpenAI API error: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
                    }
                    
                    const data = await response.json();
                    
                    if (!data.text || data.text.trim().length === 0) {
                        throw new Error('No speech detected in audio file');
                    }
                    
                    return data.text;
                } catch (error) {
                    // Handle specific error types
                    if (error.name === 'TypeError' && error.message.includes('fetch')) {
                        throw new Error('Network error: Unable to connect to OpenAI API. This might be a CORS issue - try running from a local server or using a CORS proxy.');
                    } else if (error.message.includes('CORS')) {
                        throw new Error('CORS error: Browser is blocking the API request. Try using a CORS proxy or disabling CORS in your browser for development.');
                    } else {
                        throw error; // Re-throw the original error
                    }
                }
            }

            async simulateTranscription() {
                // Simulate processing time
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                return `Welcome to our presentation about AI-powered content creation. Today we'll explore how artificial intelligence is transforming the way we create videos, podcasts, and multimedia content. We'll discuss three key areas: automated transcription, intelligent content analysis, and AI-driven video generation. Modern AI tools can process audio with 95% accuracy, extract meaningful insights from text, and generate professional-quality videos in minutes rather than hours. This technology is making content creation accessible to everyone, regardless of technical expertise.`;
            }

            async extractKeyPoints(text) {
                const openaiKey = document.getElementById('openaiKey').value.trim();
                
                if (!openaiKey) {
                    this.showStatus('No OpenAI API key provided. Using basic keyword extraction...', 'warning');
                    return this.extractBasicKeywords(text);
                }

                try {
                    this.showStatus('Analyzing content with OpenAI...', 'info');
                    return await this.extractWithOpenAI(text, openaiKey);
                } catch (error) {
                    this.showStatus('AI analysis failed, using basic extraction...', 'warning');
                    console.error('OpenAI extraction error:', error);
                    return this.extractBasicKeywords(text);
                }
            }

            async extractWithOpenAI(text, apiKey) {
                if (!text || text.trim().length === 0) {
                    throw new Error('No text provided for analysis');
                }

                const prompt = `Extract 5 key points from the following text for creating engaging multimedia content. Return only the key points as a numbered list:

${text}`;

                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${apiKey}`
                        },
                        body: JSON.stringify({
                            model: 'gpt-3.5-turbo',
                            messages: [{
                                role: 'user',
                                content: prompt
                            }],
                            max_tokens: 300,
                            temperature: 0.7
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json().catch(() => ({}));
                        throw new Error(`OpenAI API error: ${response.status} - ${errorData.error?.message || 'Unknown error'}`);
                    }

                    const data = await response.json();
                    
                    if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                        throw new Error('Invalid response from OpenAI API');
                    }
                    
                    const content = data.choices[0].message.content;
                    
                    // Parse the numbered list into an array
                    const keyPoints = content
                        .split('\n')
                        .filter(line => line.trim().length > 0)
                        .map(line => line.replace(/^\d+\.\s*/, '').trim())
                        .filter(point => point.length > 0)
                        .slice(0, 5); // Ensure we have max 5 points
                    
                    if (keyPoints.length === 0) {
                        throw new Error('No key points extracted from AI response');
                    }
                    
                    return keyPoints;
                } catch (error) {
                    // Handle specific error types
                    if (error.name === 'TypeError' && error.message.includes('fetch')) {
                        throw new Error('Network error: Unable to connect to OpenAI API. This might be a CORS issue - try running from a local server.');
                    } else if (error.message.includes('CORS')) {
                        throw new Error('CORS error: Browser is blocking the API request. See troubleshooting section for solutions.');
                    } else {
                        throw error; // Re-throw the original error
                    }
                }
            }

            extractBasicKeywords(text) {
                if (!text || text.trim().length === 0) {
                    return ['No content available for analysis'];
                }

                // Split into sentences and extract meaningful ones
                const sentences = text
                    .split(/[.!?]+/)
                    .map(s => s.trim())
                    .filter(s => s.length > 20) // Filter out very short sentences
                    .slice(0, 5); // Take first 5 meaningful sentences

                if (sentences.length === 0) {
                    // Fallback: extract based on common patterns
                    const words = text.toLowerCase().split(/\s+/);
                    const keywordCounts = {};
                    
                    // Filter out common words
                    const stopWords = ['the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'a', 'an', 'is', 'are', 'was', 'were', 'been', 'be', 'have', 'has', 'had', 'do', 'does', 'did', 'will', 'would', 'could', 'should', 'this', 'that', 'these', 'those', 'can', 'may', 'might', 'must', 'shall'];
                    
                    words.forEach(word => {
                        word = word.replace(/[^\w]/g, '');
                        if (word.length > 3 && !stopWords.includes(word)) {
                            keywordCounts[word] = (keywordCounts[word] || 0) + 1;
                        }
                    });

                    // Get top keywords and create key points
                    const topKeywords = Object.entries(keywordCounts)
                        .sort(([,a], [,b]) => b - a)
                        .slice(0, 5)
                        .map(([word]) => word);

                    return topKeywords.map(keyword => `Key topic: ${keyword.charAt(0).toUpperCase() + keyword.slice(1)}`);
                }

                return sentences.map((sentence, index) => `${index + 1}. ${sentence}`);
            }

            displayKeyPoints(keyPoints) {
                const list = document.getElementById('keyPointsList');
                list.innerHTML = '';
                keyPoints.forEach(point => {
                    const li = document.createElement('li');
                    li.textContent = point;
                    list.appendChild(li);
                });
                document.getElementById('keyPointsResult').style.display = 'block';
            }

            selectOutput(outputType) {
                document.querySelectorAll('.output-card').forEach(card => card.classList.remove('selected'));
                document.querySelector(`[data-output="${outputType}"]`).classList.add('selected');
                this.selectedOutput = outputType;
            }

            selectQuality(quality) {
                document.querySelectorAll('.quality-option').forEach(option => option.classList.remove('selected'));
                document.querySelector(`[data-quality="${quality}"]`).classList.add('selected');
                this.selectedQuality = quality;
            }

            togglePlatform(platform) {
                const option = document.querySelector(`[data-platform="${platform}"]`);
                option.classList.toggle('selected');
                
                if (this.selectedPlatforms.includes(platform)) {
                    this.selectedPlatforms = this.selectedPlatforms.filter(p => p !== platform);
                } else {
                    this.selectedPlatforms.push(platform);
                }
            }

            async generateContent() {
                this.showStatus(`Generating ${this.selectedOutput}...`, 'info');
                
                try {
                    const settings = this.getGenerationSettings();
                    const result = await this.performGeneration(settings);
                    
                    this.displayGeneratedContent(result);
                    document.getElementById('generationResults').style.display = 'block';
                    this.showStatus('Content generated successfully!', 'success');
                    
                } catch (error) {
                    this.showStatus('Generation failed: ' + error.message, 'error');
                }
            }

            getGenerationSettings() {
                const length = document.getElementById('videoLength').value === 'custom' 
                    ? document.getElementById('customLength').value 
                    : document.getElementById('videoLength').value;
                
                return {
                    outputType: this.selectedOutput,
                    quality: this.selectedQuality,
                    length: parseInt(length),
                    voiceStyle: document.getElementById('voiceStyle').value,
                    musicStyle: document.getElementById('musicStyle').value,
                    visualStyle: document.getElementById('visualStyle').value,
                    pacing: document.getElementById('pacing').value,
                    content: this.transcript,
                    keyPoints: this.keyPoints
                };
            }

            async performGeneration(settings) {
                // Simulate content generation
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({
                            type: settings.outputType,
                            url: this.createMockContent(settings.outputType),
                            duration: settings.length,
                            quality: settings.quality
                        });
                    }, 3000);
                });
            }

            createMockContent(type) {
                // Create mock content for demonstration
                switch (type) {
                    case 'podcast':
                        return 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBA...'; // Mock audio
                    case 'movie':
                    case 'video':
                    case 'infographic':
                        return 'data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb20...'; // Mock video
                    default:
                        return '';
                }
            }

            displayGeneratedContent(result) {
                const preview = document.getElementById('generatedMediaPreview');
                preview.innerHTML = '';
                
                if (result.type === 'podcast') {
                    const audio = document.createElement('audio');
                    audio.controls = true;
                    audio.style.width = '100%';
                    audio.src = result.url;
                    preview.appendChild(audio);
                } else {
                    const video = document.createElement('video');
                    video.controls = true;
                    video.style.maxWidth = '100%';
                    video.src = result.url;
                    preview.appendChild(video);
                }
                
                const info = document.createElement('div');
                info.innerHTML = `
                    <p><strong>Type:</strong> ${result.type.toUpperCase()}</p>
                    <p><strong>Duration:</strong> ${result.duration} seconds</p>
                    <p><strong>Quality:</strong> ${result.quality.toUpperCase()}</p>
                `;
                preview.appendChild(info);
            }

            schedulePost() {
                const title = document.getElementById('contentTitle').value;
                const description = document.getElementById('contentDescription').value;
                const scheduleDate = document.getElementById('scheduleDate').value;
                const tags = document.getElementById('tags').value;
                
                if (!title || !scheduleDate || this.selectedPlatforms.length === 0) {
                    this.showStatus('Please fill in required fields and select platforms', 'error');
                    return;
                }
                
                const post = {
                    id: Date.now(),
                    title,
                    description,
                    scheduleDate: new Date(scheduleDate),
                    platforms: [...this.selectedPlatforms],
                    tags: tags.split(',').map(tag => tag.trim()),
                    status: 'pending',
                    createdAt: new Date()
                };
                
                this.scheduledPosts.push(post);
                this.saveScheduledPosts();
                this.displayScheduledPosts();
                
                this.showStatus('Post scheduled successfully!', 'success');
                this.clearScheduleForm();
            }

            clearScheduleForm() {
                document.getElementById('contentTitle').value = '';
                document.getElementById('contentDescription').value = '';
                document.getElementById('scheduleDate').value = '';
                document.getElementById('tags').value = '';
                
                document.querySelectorAll('.platform-option').forEach(option => {
                    option.classList.remove('selected');
                });
                this.selectedPlatforms = [];
            }

            displayScheduledPosts() {
                const container = document.getElementById('scheduledPosts');
                container.innerHTML = '';
                
                if (this.scheduledPosts.length === 0) {
                    container.innerHTML = '<p>No scheduled posts yet.</p>';
                    return;
                }
                
                this.scheduledPosts.forEach(post => {
                    const card = document.createElement('div');
                    card.className = 'schedule-card';
                    card.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h4>${post.title}</h4>
                                <p><strong>Scheduled:</strong> ${post.scheduleDate.toLocaleString()}</p>
                                <p><strong>Platforms:</strong> ${post.platforms.join(', ')}</p>
                                <p><strong>Description:</strong> ${post.description}</p>
                                ${post.tags.length > 0 ? `<p><strong>Tags:</strong> ${post.tags.join(', ')}</p>` : ''}
                            </div>
                            <div>
                                <span class="schedule-status ${post.status}">${post.status}</span>
                                <br><br>
                                <button onclick="app.deleteScheduledPost(${post.id})" class="danger" style="padding: 5px 10px;">Delete</button>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                });
            }

            deleteScheduledPost(id) {
                this.scheduledPosts = this.scheduledPosts.filter(post => post.id !== id);
                this.saveScheduledPosts();
                this.displayScheduledPosts();
                this.showStatus('Scheduled post deleted', 'info');
            }

            downloadContent() {
                // Simulate download
                this.showStatus('Download started...', 'info');
                setTimeout(() => {
                    this.showStatus('Content downloaded successfully!', 'success');
                }, 1000);
            }

            saveSettings() {
                const settings = {
                    openaiKey: document.getElementById('openaiKey').value,
                    elevenLabsKey: document.getElementById('elevenLabsKey').value,
                    stabilityKey: document.getElementById('stabilityKey').value,
                    runwayKey: document.getElementById('runwayKey').value,
                    defaultQuality: document.getElementById('defaultQuality').value,
                    defaultLength: document.getElementById('defaultLength').value,
                    autoSchedule: document.getElementById('autoSchedule').value,
                    notificationEmail: document.getElementById('notificationEmail').value
                };
                
                localStorage.setItem('aiContentPlatformSettings', JSON.stringify(settings));
                this.showStatus('Settings saved successfully!', 'success');
            }

            loadSettings() {
                const saved = localStorage.getItem('aiContentPlatformSettings');
                if (saved) {
                    const settings = JSON.parse(saved);
                    Object.keys(settings).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) element.value = settings[key];
                    });
                }
            }

            saveScheduledPosts() {
                localStorage.setItem('scheduledPosts', JSON.stringify(this.scheduledPosts));
            }

            loadScheduledPosts() {
                const saved = localStorage.getItem('scheduledPosts');
                if (saved) {
                    this.scheduledPosts = JSON.parse(saved).map(post => ({
                        ...post,
                        scheduleDate: new Date(post.scheduleDate),
                        createdAt: new Date(post.createdAt)
                    }));
                    this.displayScheduledPosts();
                }
            }

            refreshSchedule() {
                this.displayScheduledPosts();
                this.showStatus('Schedule refreshed', 'info');
            }

            clearSchedule() {
                if (confirm('Are you sure you want to clear all scheduled posts?')) {
                    this.scheduledPosts = [];
                    this.saveScheduledPosts();
                    this.displayScheduledPosts();
                    this.showStatus('All scheduled posts cleared', 'info');
                }
            }

            async testConnections() {
                this.showStatus('Testing API connections...', 'info');
                
                const openaiKey = document.getElementById('openaiKey').value.trim();
                const elevenLabsKey = document.getElementById('elevenLabsKey').value.trim();
                const stabilityKey = document.getElementById('stabilityKey').value.trim();
                const runwayKey = document.getElementById('runwayKey').value.trim();
                
                let results = [];
                
                // Test OpenAI
                if (openaiKey) {
                    try {
                        await this.testOpenAI(openaiKey);
                        results.push('‚úÖ OpenAI API: Connected successfully');
                    } catch (error) {
                        results.push(`‚ùå OpenAI API: ${error.message}`);
                    }
                } else {
                    results.push('‚ö†Ô∏è OpenAI API: No key provided');
                }
                
                // Test ElevenLabs
                if (elevenLabsKey) {
                    try {
                        await this.testElevenLabs(elevenLabsKey);
                        results.push('‚úÖ ElevenLabs API: Connected successfully');
                    } catch (error) {
                        results.push(`‚ùå ElevenLabs API: ${error.message}`);
                    }
                } else {
                    results.push('‚ö†Ô∏è ElevenLabs API: No key provided');
                }
                
                // Test other APIs (placeholder for now)
                if (stabilityKey) {
                    results.push('‚ö†Ô∏è Stability AI: Testing not implemented yet');
                } else {
                    results.push('‚ö†Ô∏è Stability AI: No key provided');
                }
                
                if (runwayKey) {
                    results.push('‚ö†Ô∏è Runway ML: Testing not implemented yet');
                } else {
                    results.push('‚ö†Ô∏è Runway ML: No key provided');
                }
                
                // Display results
                const resultMessage = results.join('\n');
                alert(resultMessage);
                this.showStatus('API connection test completed', 'info');
            }
            
            async testOpenAI(apiKey) {
                const response = await fetch('https://api.openai.com/v1/models', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    }
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.error?.message || `HTTP ${response.status}`);
                }
                
                return true;
            }
            
            async testElevenLabs(apiKey) {
                const response = await fetch('https://api.elevenlabs.io/v1/voices', {
                    method: 'GET',
                    headers: {
                        'xi-api-key': apiKey
                    }
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.detail?.message || `HTTP ${response.status}`);
                }
                
                return true;
            }

            updateProgress(percent) {
                document.getElementById('progressBar').style.width = percent + '%';
            }

            showStatus(message, type, debugInfo = null) {
                const statusDiv = document.getElementById('statusMessages');
                const statusEl = document.createElement('div');
                statusEl.className = `status ${type}`;
                
                let fullMessage = message;
                
                // Add debug information if debug mode is enabled
                const debugMode = document.getElementById('debugMode')?.checked;
                if (debugMode && debugInfo) {
                    fullMessage += '\n\nDebug Info: ' + JSON.stringify(debugInfo, null, 2);
                    statusEl.style.whiteSpace = 'pre-wrap';
                }
                
                statusEl.textContent = fullMessage;
                statusDiv.appendChild(statusEl);
                
                // Also log to console for debugging
                console.log(`[${type.toUpperCase()}] ${message}`, debugInfo || '');
                
                // Remove after 8 seconds (longer for error messages)
                const timeout = type === 'error' ? 10000 : 5000;
                setTimeout(() => {
                    if (statusEl.parentNode) {
                        statusEl.parentNode.removeChild(statusEl);
                    }
                }, timeout);
            }

            // Add a method to handle and display errors consistently
            handleError(error, context = '') {
                // Store the last error for debugging
                this.lastError = {
                    message: error.message,
                    context: context,
                    timestamp: new Date().toISOString(),
                    stack: error.stack
                };
                
                const debugMode = document.getElementById('debugMode')?.checked;
                
                let errorMessage = `Error${context ? ' in ' + context : ''}: ${error.message}`;
                let debugInfo = null;
                
                if (debugMode) {
                    debugInfo = this.lastError;
                }
                
                this.showStatus(errorMessage, 'error', debugInfo);
                console.error('Application Error:', error);
            }
        }

        // Initialize the application
        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new AIContentPlatform();
        });
    </script>
</body>
</html>